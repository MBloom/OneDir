{% extends 'base.html' %}
{% block head %}
<!-- dropzone includes -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/dropzone/3.8.4/dropzone.min.js"></script>
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/dropzone/3.8.4/css/dropzone.css" />
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/dropzone/3.8.4/css/basic.css" /> 

{% endblock head %}

{% block main %}
<div class = "jumbotron">
    {% if uname == None %}
    <h2>Please <a href={{ url_for('login') }}>login</a> to access your files</h2>
    {% else %}
    <h1>Welcome, {{ uname }}</h1>
    <p class="lead">Here is a list of all your files that have been uploaded to the OneDir server. To view the contents of any file simply click on it's name below.<br><br>
    To save any of your files right click and 'Save as...'</p>
</div>
<div>
    {% if files|length == 0 %}
    <h4>You have no files to display</h4>
    {% else %}
    <h2 class="subtext">Your files -- 
        <a href={{ url_for('log_view', user=uname)}}>History</a>
    </h2>
    {% for file in files %}
    <div class="row">
        <div class="col-md-6">
            <h3><a href={{ url_for('file_view', name=file.name) }}>{{ file.name }}</a></h3>
        </div>
        <div class="col-md-4"></div>
        <div class="col-md-1">
            <a>
                <span class="glyphicon glyphicon-trash"></span> 
            </a> 
        </div>
        <div class="col-md-1">
            <a download  href={{ url_for('file_view', name=file.name) }}>
                <span class="glyphicon glyphicon-cloud-download"></span> 
            </a> 
        </div>
    </div>
    {% endfor %}
    {% endif %}


    <h2 class="subtext">Upload New Files</h2>
    <form action="{{ url_for('file_upload', user=uname)}}" class="dropzone dz-clickable" id="demo-upload">
        <div class="dz-message centa"><h2>Drag files here!</h2></div>
    </form>


    {% endif %}
</div>
{% endblock main %}
